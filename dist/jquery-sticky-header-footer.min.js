/*
 *  jquery-sticky-header-footer - v1.0.0
 *  jQuery plugin that dynamically sticks content headers and footers to the top and bottom of viewport.
 *  https://github.com/kboucher
 *
 *  Made by Kevin Boucher
 *  Under MIT License
 */
!function(a,b){"use strict";function c(c,f){this.element=c,this.settings=a.extend({},e,f),this.bodyElement=a(this.settings.bodySelector,this.element)[0],this.footerElement=a(this.settings.footerSelector,this.element)[0],this.headerElement=a(this.settings.headerSelector,this.element)[0],this.isTable="table"===this.element.tagName.toLowerCase(),this.isVisible=function(){var a=this.element.getBoundingClientRect();return a.top<b.innerHeight&&a.bottom>0},this._defaults=e,this._name=d,this._scrollHandler=null,this.init()}var d="stickyHeaderFooter",e={bodySelector:"tbody",footerSelector:"tfoot",headerSelector:"thead",top:"0",bottom:"0"},f={outerWrapper:"sticky-header-footer_wrapper",innerWrapper:"sticky-header-footer_sticky-wrapper",innerWrapperHead:"sticky-header-footer_sticky-header",innerWrapperFoot:"sticky-header-footer_sticky-footer"},g=function(a,b){var c=a.parentNode,d=a.nextSibling===b?a:a.nextSibling;b.parentNode.insertBefore(a,b),c.insertBefore(b,d)},h=function(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}},i=function(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}};a.extend(c.prototype,{init:function(){a(this.element).wrap('<div class="'+f.outerWrapper+'"></div>'),(this.footerElement||this.headerElement)&&(this.footerElement&&(this.setupHeaderFooter(!0),this.footerElement.isFooter=!0),this.headerElement&&this.setupHeaderFooter(),this._scrollHandler=h(this.watchHeaderFooter.bind(this),132),this._scrollStopHandler=i(this.watchHeaderFooter.bind(this),133),b.addEventListener("scroll",this._scrollHandler),b.addEventListener("scroll",this._scrollStopHandler),b.dispatchEvent(new Event("scroll")))},setupHeaderFooter:function(b){var c=b?"insertAfter":"insertBefore",d=b?"footerElement":"headerElement",e=[f.innerWrapper,b?f.innerWrapperFoot:f.innerWrapperHead];this[d].stickyClone=a(this[d]).clone(!1).wrap(a("<div></div>").css({bottom:b?this.settings.bottom:"auto",position:"fixed",top:b?"auto":this.settings.top,"z-index":1e3}).addClass(e.join(" "))).wrap(function(){var b=this.element.getAttribute("class");return this.isTable?a("<table></table>").addClass(b):""}.bind(this)).parents("."+f.innerWrapper).css("display","none")[c](this.element)[0]},stick:function(b){var c=this.settings,d=b.isFooter?c.footerSelector:c.headerSelector,e=a(b).parents(".sticky-header-footer_wrapper:first").width()+"px";g(b,b.stickyClone.querySelector(d)),b.isStuck=!0,b.stickyClone.style.display="block",b.stickyClone.style.width=e},unstick:function(a){var b=this.settings,c=a.isFooter?b.footerSelector:b.headerSelector;g(a,this.element.querySelector(c)),a.isStuck=!1,a.stickyClone.style.display="none"},watchFooter:function(a){var c=this.bodyElement.getBoundingClientRect(),d=parseInt(this.settings.bottom,10),e=a.getBoundingClientRect(),f=b.innerHeight;a.isStuck?(c.bottom<f-d-e.height||c.top>f-d||!this.isVisible())&&this.unstick.call(this,a):c.bottom>f-d-e.height&&c.top<f-d&&this.isVisible()&&this.stick.call(this,a)},watchHeader:function(a){var b=this.bodyElement.getBoundingClientRect(),c=parseInt(this.settings.top,10),d=a.getBoundingClientRect();a.isStuck?(b.top>c+d.height||b.bottom<c+d.height/2)&&this.unstick.call(this,a):b.top<=c+d.height&&b.bottom>c+d.height&&this.stick.call(this,a)},watchHeaderFooter:function(){this.footerElement&&this.watchFooter(this.footerElement),this.headerElement&&this.watchHeader(this.headerElement)},tearDown:function(){b.removeEventListener("scroll",this._scrollHandler),b.removeEventListener("scroll",this._scrollStopHandler)}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);